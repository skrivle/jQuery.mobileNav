(function(d,b,f){var c="mobileNav",e={css:{triggerClass:"mobileNavTrigger",pluginActiveClass:"mobileNavActive",isOpenClass:"mobileNavOpen",labelClass:"mobileNavLabel",wrapperClass:"mobileNavWrapper"},text:{openText:"Open menu",closeText:"Close menu",noActiveItemText:"Menu"},callbacks:{afterOpen:f,afterClose:f,afterConstruct:f,afterDestruct:f},breakpoint:500,showLabel:false,activeItemSelector:"ul > li.active > a"};function a(i,h){var g=this;g.$element=d(i);g.options=d.extend({},e,h);g.init()}a.prototype.init=function(){var g=this,h;g.$wrapper=d('<div class="'+g.options.css.wrapperClass+'"/>');g.$trigger=d('<span aria-role="button" class="'+g.options.css.triggerClass+'">'+g.options.text.openText+"</span>");g.$label=d('<span class="'+g.options.css.labelClass+'"/>');h=(b.Modernizr&&b.Modernizr.touch)?"touchstart":"click";d(b).resize(function(){g.observe()});g.observe();g.$element.on(h,"."+g.options.css.triggerClass,function(i){i.preventDefault();if(g.isOpen()){g.close()}else{g.open()}})};a.prototype.isOpen=function(){var g=this;return g.$element.hasClass(g.options.css.isOpenClass)};a.prototype.close=function(){var g=this;g.$element.removeClass(g.options.css.isOpenClass);g.$trigger.text(g.options.text.openText);g.executeCallback(g.options.callbacks.afterClose)};a.prototype.open=function(){var g=this;g.$element.addClass(g.options.css.isOpenClass);g.$trigger.text(g.options.text.closeText);g.executeCallback(g.options.callbacks.afterOpen)};a.prototype.observe=function(){var g=this;if(d(b).width()<g.options.breakpoint){g.construct()}else{g.destruct()}};a.prototype.construct=function(){var g=this;g.$wrapper.append(g.$trigger);if(g.options.showLabel){g.$wrapper.append(g.$label)}g.$element.prepend(g.$wrapper);g.$element.addClass(g.options.css.pluginActiveClass);g.$trigger=g.$element.find("."+g.options.css.triggerClass);g.$label=g.$element.find("."+g.options.css.labelClass);g.updateLabel();g.executeCallback(g.options.callbacks.afterConstruct)};a.prototype.updateLabel=function(){var g=this,i,h;i=g.$element.find(g.options.activeItemSelector);if(i.length){h=i.text()}else{h=g.options.text.noActiveItemText}g.$label.text(h)};a.prototype.destruct=function(){var g=this;g.$element.removeClass(g.options.css.pluginActiveClass);g.$wrapper.remove();g.executeCallback(g.options.callbacks.afterDestruct)};a.prototype.executeCallback=function(g){if(typeof g==="function"){g()}};d.fn[c]=function(g){return this.each(function(){if(!d.data(this,"plugin_"+c)){d.data(this,"plugin_"+c,new a(this,g))}else{if(typeof g==="string"){switch(g){case"updateLabel":d.data(this,"plugin_"+c).updateLabel();break;case"open":d.data(this,"plugin_"+c).open();break;case"close":d.data(this,"plugin_"+c).close();break}}}})}})(jQuery,window);